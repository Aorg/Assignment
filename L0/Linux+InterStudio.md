 ![1729033516631](image/ç™½å«–A100-git/1729033516631.png)

# è¿›å…¥InterStudio

##### è¿™èŠ‚è¯¾æ˜¯ä¸ºäº†è®©å¤§å®¶ç†Ÿæ‚‰ä½¿ç”¨InterStudioå¹³å°ï¼Œä»¥ä¾¿åç»­å¼€å‘

InterStudioå¹³å°æ˜¯ç®—åŠ›å¹³å°ï¼Œå¯ä»¥é€šè¿‡å¹³å°ä½¿ç”¨A100,è¿˜å¯ä»¥ä½¿ç”¨â€œä¹¦ç”Ÿâ€å›¢é˜Ÿé›†æˆå¥½çš„ç¯å¢ƒã€å·¥å…·ï¼Œå¿«é€Ÿéƒ¨ç½²LLMs.

## è¿›å…¥å¹³å°ï¼š

è®°å¾—æŠ¥åï¼Œè·å¾—å…è´¹ç®—åŠ›ï¼Œåœ°å€ï¼š[InternStudio](https://studio.intern-ai.org.cn/ "InternStudio")

![](https://i-blog.csdnimg.cn/direct/e19d2b2b7da54d9b890e0bdb9a50d728.png)![]()**ç¼–è¾‘**

## é…ç½®sshï¼š

![](https://i-blog.csdnimg.cn/direct/e2c167e0de874b57b995ea088719549f.png)![]()**ç¼–è¾‘**

å…·ä½“çš„é…ç½®ssh keyæ–¹æ³• è¯·çœ‹ï¼š

[https://aicarrier.feishu.cn/wiki/VLS7w5I22iQWmTk0ExpczIKcnpf](https://aicarrier.feishu.cn/wiki/VLS7w5I22iQWmTk0ExpczIKcnpf "https://aicarrier.feishu.cn/wiki/VLS7w5I22iQWmTk0ExpczIKcnpf")

## åˆ›å»ºå¼€å‘æœºï¼š

æŠ¥å¥½åè¿›ç¾¤ç™»è®°åå°±æœ‰50ç‚¹ç®—åŠ›å•¦ï¼Œç›´æ¥åˆ›å»ºä¸€ä¸ªæœ€å°èµ„æºçš„å¼€å‘æœºç†Ÿæ‚‰ä¸€ä¸‹ï¼Œ

cudaç¯å¢ƒé€‰å’Œè‡ªå·±è®¾å¤‡æœ€æ¥è¿‘çš„ï¼Œä»¥ä¾¿äºæ—¥åè¿ç§»ã€‚

![](https://i-blog.csdnimg.cn/direct/6aba29d216e242ee8486aec1b76028dd.png)![]()**ç¼–è¾‘**

### æ•°æ®ï¼š

æ‰€æœ‰çš„æ•°æ®éƒ½åœ¨â€œæˆ‘çš„äº‘ç›˜â€ï¼Œå¯ä»¥ç†è§£ä¸ºè¿™å°±æ˜¯ä½ çš„ç³»ç»Ÿç›˜ï¼Œæ‰€ä»¥åªè¦é…å¥½ä¸€å¥—ç¯å¢ƒï¼Œæ–°çš„å¼€å‘åŠéƒ½ä¼šä½¿ç”¨åŒä¸€ä¸ªcondaã€‚æ–‡ä»¶å¤¹æ•°æ®éƒ½ä¼šåœ¨ç›¸åŒçš„ä½ç½®ã€‚

## è¿›å…¥å¼€å‘æœºï¼š

![](https://i-blog.csdnimg.cn/direct/57b74e3186f642ff8a955487c9fd6d0b.png)![]()**ç¼–è¾‘**

æœ‰ä¸¤ç§é€‰æ‹©ï¼Œ

### æœ¬åœ°ä½¿ç”¨Vscodeè¿æ¥æœåŠ¡å™¨

ç‚¹å‡»sshè¿æ¥

![](https://i-blog.csdnimg.cn/direct/99c21f387c0f4e0b87eeae45e5fe353b.png)![]()**ç¼–è¾‘**

å¤åˆ¶ç™»é™†å‘½ä»¤

![](https://i-blog.csdnimg.cn/direct/94028eece8d140d1a524140e8bbaf34d.png)![]()**ç¼–è¾‘**

å›è½¦ä¼šè¿›å…¥ssh config æ–‡ä»¶ä¿å­˜ï¼Œå› ä¸ºå·²ç»é…ç½®ssh keyä¸ç”¨ç®¡å¯†ç ï¼Œ

![](https://i-blog.csdnimg.cn/direct/780211d0a6ea42f38a2b081024064d8a.png)![]()**ç¼–è¾‘**

åœ¨sshåˆ—è¡¨ä¸­æ‰¾åˆ°ssh.intern-ai.org.cn

![](https://i-blog.csdnimg.cn/direct/8f0c55bf71954aab942a8385ce9ac628.png)![]()**ç¼–è¾‘**

ç‚¹å‡»ç›´æ¥è¿æ¥ï¼Œå®ç°æœ¬åœ°vscodeè¿æ¥interStudioæœåŠ¡å™¨

![](https://i-blog.csdnimg.cn/direct/ea27a8e44df54e5bb977bec419a9cf27.png)![]()**ç¼–è¾‘**

### ç½‘é¡µè®¿é—®å¹³å°çš„Vscode,ç»ˆç«¯

ç‚¹å‡»è¿›å…¥å¼€å‘æœºï¼Œæœ‰vscodeå’Œterminalé€‰é¡¹

## ç«¯å£æ˜ å°„ï¼š

### 1.å®‰è£…gradio

```bash
pip install gradio==4.29.0
```

![]()

###### å¦‚æœåº“å†²çªï¼ŒæŒ‰ç…§æŒ‡ç¤ºä¿®æ”¹

æˆ‘éœ€è¦ä¿®æ”¹çš„åº“ç‰ˆæœ¬å¦‚ä¸‹:

* pip install importlib-metadata==6.6
* pip install requests~=2.29
* pip install urllib3~=2.0

### 2. å¤åˆ¶ä»£ç ï¼š

    åˆ›å»ºä¸€ä¸ªhello.pyæ–‡

```python
import socket
import re
import gradio as gr
 
# è·å–ä¸»æœºå
def get_hostname():
    hostname = socket.gethostname()
    match = re.search(r'-(\d+)$', hostname)
    name = match.group(1)
  
    return name
 
# åˆ›å»º Gradio ç•Œé¢
with gr.Blocks(gr.themes.Soft()) as demo:
    html_code = f"""
            <p align="center">
            <a href="https://intern-ai.org.cn/home">
                <img src="https://intern-ai.org.cn/assets/headerLogo-4ea34f23.svg" alt="Logo" width="20%" style="border-radius: 5px;">
            </a>
            </p>
            <h1 style="text-align: center;">â˜ï¸ Welcome {get_hostname()} user, welcome to the ShuSheng LLM Practical Camp Course!</h1>
            <h2 style="text-align: center;">ğŸ˜€ Letâ€™s go on a journey through ShuSheng Island together.</h2>
            <p align="center">
                <a href="https://github.com/InternLM/Tutorial/blob/camp3">
                    <img src="https://oss.lingkongstudy.com.cn/blog/202406301604074.jpg" alt="Logo" width="20%" style="border-radius: 5px;">
                </a>
            </p>

            """
    gr.Markdown(html_code)

demo.launch()
```

![]()

    æœ¬åœ°ç½‘é¡µæ‰“å¼€è¿œç¨‹æœåŠ¡å™¨è¿è¡Œçš„ä»£ç ã€‚

### 3.æ‰“å¼€cmd.ä½¿ç”¨sshè¿æ¥æœåŠ¡å™¨

![](https://i-blog.csdnimg.cn/direct/7b52098a11fe4a399d63ad30da71f17c.png)![]()**ç¼–è¾‘**

### 4.è¿è¡Œä»£ç ï¼š

æ‰“å¼€ç½‘é¡µ

å¦‚æœæ²¡æœ‰cmdè¿æ¥sshæ˜¯æ— æ³•æ‰“å¼€çš„å™¢

![](https://i-blog.csdnimg.cn/direct/aeb5c841d4334e659281b26e01910b33.png)![]()**ç¼–è¾‘**

## linuxå¸¸ç”¨å‘½ä»¤

å»ºè®®å¤§å®¶æŸ¥çœ‹æ´»åŠ¨çš„å®˜æ–¹æ•™ç¨‹[Docs](https://aicarrier.feishu.cn/wiki/XZChwwDsciyFyHk5mGTc1EKinkc "Docs")

å…¶ä¸­æ¯”è¾ƒé‡è¦çš„æ˜¯æŸ¥çœ‹è‡ªå·±çš„GPU

1.studio-smi

2.å…‹éš†ç¯å¢ƒ

```bash
tar --skip-old-files -xzvf /share/pkgs.tar.gz -C ${CONDA_HOME}

conda create -n $target --clone ${SHARE_CONDA_HOME}/${source}
```

![]()

ç¬¬ä¸€æ­¥ï¼Œå°†æ–°çš„condaç¯å¢ƒåˆ›å»ºåˆ°/share/conda_envsä¸‹

> conda create -p /share/conda_envs/xxx python=3.1x

ç¬¬äºŒæ­¥ï¼Œå°†æœ¬æœº/root/.conda/pkgsä¸‹çš„æ–‡ä»¶æ‹·è´åˆ°/share/pkgsä¸­ï¼Œé‡æ–°å‹ç¼©å¹¶æ›¿æ¢(æ­¤æ­¥éª¤æ˜¯ä¸ºäº†æŠŠcondaåˆ›å»ºè¿‡ç¨‹ä¸­å¤§çš„å…¬å…±åŒ…å­˜å‚¨èµ·æ¥ï¼Œé¿å…é‡å¤ä¸‹è½½)

> cp -r -n /root/.conda/pkgs/* /share/pkgs/
>
> cd /share && tar -zcvf pkgs.tar.gz pkgs

ç¬¬ä¸‰æ­¥ï¼Œæ›´æ–°install_conda_env.shä¸­çš„listå‡½æ•°ï¼Œå¢åŠ æ–°çš„condaç¯å¢ƒè¯´æ˜ã€‚

## å¸¸è§é—®é¢˜

1. ### InternStudio å¼€å‘æœºçš„ç¯å¢ƒç©åäº†ï¼Œå¦‚ä½•åˆå§‹åŒ–å¼€å‘æœºç¯å¢ƒ

**æ…é‡æ‰§è¡Œï¼ï¼ï¼ï¼æ‰€æœ‰æ•°æ®å°†ä¼šä¸¢å¤±ï¼Œä»…é™ InternStudio å¹³å°ï¼Œè‡ªå·±çš„æœºå™¨åƒä¸‡åˆ«è¿™ä¹ˆæ“ä½œ**

* ç¬¬ä¸€æ­¥æœ¬åœ°ç»ˆç«¯ ssh è¿ä¸Šå¼€å‘æœºï¼ˆä¸€å®šè¦ ssh è¿æ¥ä¸Šæ“ä½œï¼Œä¸èƒ½åœ¨ web é‡Œé¢æ“ä½œï¼ï¼ï¼ï¼‰
* ç¬¬äºŒæ­¥æ‰§è¡Œ `rm -rf /root`ï¼Œå¤§æ¦‚ä¼šç­‰å¾…10åˆ†é’Ÿ
* ç¬¬ä¸‰æ­¥é‡å¯å¼€å‘æœº,ç³»ç»Ÿä¼šé‡ç½® /root è·¯å¾„ä¸‹çš„é…ç½®æ–‡ä»¶
* ç¬¬å››æ­¥ `ln -s /share /root/share`
